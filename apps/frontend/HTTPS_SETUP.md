# HTTPS é–‹ç™¼æœå‹™å™¨è¨­ç½®æŒ‡å—

## ç‚ºä»€éº¼éœ€è¦ HTTPSï¼Ÿ

iOS è¦æ±‚ç›¸æ©ŸåŠŸèƒ½åªèƒ½åœ¨ **secure context** ä¸­ä½¿ç”¨ï¼š
- âœ… HTTPS ç¶²ç«™
- âœ… localhost (http://localhost:3000)

âŒ **ä¸æ”¯æ´**ï¼š`http://192.168.x.x:3000` (é–‹ç™¼ç¶²å€)

å› æ­¤ï¼Œè¦åœ¨ iPhone ä¸Šæ¸¬è©¦ç›¸æ©ŸåŠŸèƒ½ï¼Œéœ€è¦ä½¿ç”¨ HTTPSã€‚

## å¿«é€Ÿè¨­ç½®æ­¥é©Ÿ

### 1. ç”Ÿæˆè‡ªç°½åè­‰æ›¸

åœ¨ `apps/frontend` ç›®éŒ„ä¸‹åŸ·è¡Œï¼š

```bash
openssl req -x509 -newkey rsa:4096 -keyout key.pem -out cert.pem -days 365 -nodes
```

é€™æœƒç”Ÿæˆï¼š
- `key.pem` - ç§é‘°
- `cert.pem` - è­‰æ›¸

### 2. å•Ÿç”¨ HTTPS

è¨­ç½®ç’°å¢ƒè®Šæ•¸ï¼š

```bash
export VITE_HTTPS=true
```

æˆ–åœ¨ `.env` æ–‡ä»¶ä¸­æ·»åŠ ï¼š

```
VITE_HTTPS=true
```

### 3. å•Ÿå‹•é–‹ç™¼æœå‹™å™¨

```bash
npm run dev
```

æœå‹™å™¨å°‡åœ¨ `https://0.0.0.0:3000` å•Ÿå‹•ã€‚

### 4. åœ¨ iPhone ä¸Šè¨ªå•

1. æ‰¾åˆ°ä½ çš„é›»è…¦ IP åœ°å€ï¼ˆä¾‹å¦‚ï¼š192.168.1.100ï¼‰
2. åœ¨ iPhone ç€è¦½å™¨ä¸­è¨ªå•ï¼š`https://192.168.1.100:3000`
3. é¦–æ¬¡è¨ªå•æœƒé¡¯ç¤ºã€Œä¸å®‰å…¨é€£æŽ¥ã€è­¦å‘Šï¼ˆå› ç‚ºæ˜¯è‡ªç°½åè­‰æ›¸ï¼‰
4. é»žæ“Šã€Œé«˜ç´šã€â†’ã€Œç¹¼çºŒè¨ªå•ã€æˆ–ã€ŒProceed to siteã€
5. ç¾åœ¨å¯ä»¥ä½¿ç”¨ç›¸æ©ŸåŠŸèƒ½äº†ï¼

## æ³¨æ„äº‹é …

### è‡ªç°½åè­‰æ›¸è­¦å‘Š

è‡ªç°½åè­‰æ›¸æœƒè§¸ç™¼ç€è¦½å™¨å®‰å…¨è­¦å‘Šï¼Œé€™æ˜¯æ­£å¸¸çš„ã€‚åœ¨é–‹ç™¼ç’°å¢ƒä¸­å¯ä»¥å¿½ç•¥ã€‚

### è­‰æ›¸ä¿¡ä»»ï¼ˆå¯é¸ï¼‰

å¦‚æžœæƒ³é¿å…æ¯æ¬¡è¨ªå•éƒ½çœ‹åˆ°è­¦å‘Šï¼Œå¯ä»¥ï¼š

1. åœ¨ iPhone ä¸Šå®‰è£è­‰æ›¸ï¼š
   - å°‡ `cert.pem` è½‰æ›ç‚º `.cer` æ ¼å¼
   - é€šéŽ AirDrop æˆ–éƒµä»¶ç™¼é€åˆ° iPhone
   - åœ¨ iPhone è¨­ç½®ä¸­å®‰è£è­‰æ›¸

2. æˆ–ä½¿ç”¨ mkcert å·¥å…·ç”Ÿæˆå—ä¿¡ä»»çš„æœ¬åœ°è­‰æ›¸ï¼š
   ```bash
   # å®‰è£ mkcert
   brew install mkcert  # macOS
   
   # å®‰è£æœ¬åœ° CA
   mkcert -install
   
   # ç”Ÿæˆè­‰æ›¸
   mkcert localhost 192.168.1.100  # æ›¿æ›ç‚ºä½ çš„ IP
   ```

### å¾Œç«¯ API ä¹Ÿéœ€è¦ HTTPSï¼ˆå¦‚æžœä½¿ç”¨ï¼‰

å¦‚æžœå¾Œç«¯ API ä¹Ÿéœ€è¦é€šéŽ HTTPS è¨ªå•ï¼Œéœ€è¦åŒæ¨£é…ç½®å¾Œç«¯çš„ HTTPSã€‚

## æ›¿ä»£æ–¹æ¡ˆ

å¦‚æžœä¸æƒ³è¨­ç½® HTTPSï¼Œå¯ä»¥ä½¿ç”¨ï¼š

1. **æ‹ç…§ä¸Šå‚³åŠŸèƒ½**ï¼šä½¿ç”¨ã€ŒðŸ“± iPhoneã€æ¨™ç±¤ï¼Œä¸å— HTTPS é™åˆ¶
2. **ä½¿ç”¨ localhost**ï¼šåœ¨é›»è…¦ç€è¦½å™¨ä¸­æ¸¬è©¦ï¼ˆ`http://localhost:3000`ï¼‰

## æ•…éšœæŽ’é™¤

### è­‰æ›¸éŒ¯èª¤

å¦‚æžœçœ‹åˆ°è­‰æ›¸ç›¸é—œéŒ¯èª¤ï¼š
- ç¢ºèª `key.pem` å’Œ `cert.pem` æ–‡ä»¶å­˜åœ¨
- æª¢æŸ¥æ–‡ä»¶æ¬Šé™
- é‡æ–°ç”Ÿæˆè­‰æ›¸

### é€£æŽ¥å¤±æ•—

å¦‚æžœç„¡æ³•é€£æŽ¥ï¼š
- ç¢ºèªé›»è…¦å’Œ iPhone åœ¨åŒä¸€ Wi-Fi ç¶²çµ¡
- æª¢æŸ¥é˜²ç«ç‰†è¨­ç½®
- ç¢ºèªä½¿ç”¨ `https://` è€Œä¸æ˜¯ `http://`
- ç¢ºèªç«¯å£ 3000 æœªè¢«å ç”¨

### ç›¸æ©Ÿä»ç„¶ç„¡æ³•ä½¿ç”¨

å¦‚æžœè¨­ç½® HTTPS å¾Œç›¸æ©Ÿä»ç„¡æ³•ä½¿ç”¨ï¼š
- ç¢ºèªè¨ªå•çš„æ˜¯ `https://` é–‹é ­çš„ URL
- æª¢æŸ¥ç€è¦½å™¨æŽ§åˆ¶å°çš„éŒ¯èª¤è¨Šæ¯
- ç¢ºèªå·²æŽˆäºˆç›¸æ©Ÿæ¬Šé™ï¼ˆè¨­ç½® > Safari/Chrome > ç›¸æ©Ÿï¼‰












